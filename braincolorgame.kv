#:kivy 1.9.0

<MenuScreen>:
    FloatLayout:
        orientation: 'vertical'
        background_color: [1, 1, 0, 1]
        height: root.height
        width: root.width + 100
        spacing: 8
        canvas.before:
            Color:
                rgba: 0.11, 0.055, 0.23, 1
            Rectangle:
                size: self.size
                pos: self.pos
        Label:
            pos_hint: {'center_x': 0.48, 'y': 0.4}
            font_size: 30
            text: "Please choose a mode"
        Button:
            size_hint: 0.6, 0.15
            pos_hint: {'center_x': 0.5, 'y': 0.5}
            background_color: [0.76, 0.255, 0.7, 1]
            text: "Colours Mode"
            # on_press: root.restart()
            on_press: root.start_color_mode()
            on_press: root.sound_validation()
            # on_press: GameScreen().reboot_progress_bar()
            on_press: root.manager.current = 'game'
        Button:
            size_hint: 0.6, 0.15
            pos_hint: {'center_x': 0.5, 'y': 0.3}
            background_color: [0.76, 0.255, 0.7, 1]
            text: "Text Mode"
            # on_press: root.restart()
            on_press: root.sound_validation()
            # on_press: root.reboot_progress_bar()
            on_press: root.manager.current = 'game'
            on_press: root.start_text_mode()
        Button:
            size_hint: 0.6, 0.15
            pos_hint: {'center_x': 0.5, 'y': 0.1}
            # pos: ((root.width * 1/5), root.height / 7)
            background_color: [0.76, 0.1, 0, 2]
            text: "Exit"
            on_press: root.leave()

<GameScreen>:
    BoxLayout:
        spacing: 5
        orientation: 'vertical'
        BoxLayout:
            size_hint_y: None
            # spacing: 5
            BoxLayout:
                spacing: 10
                BoxLayout:
                    Label:
                        font_size: 18
                        text: "Time Mode"
                    Switch:
                    # pos_hint: {'center_x': 0.48, 'y': 0.25}
                        on_active: root.sound_play()
                        on_active: root.change_time_mode()
                        active: root.active
                BoxLayout:
                    # padding: [1, 1, 1, 1]
                    # spacing: 25
                    Label:
                        font_size: 18
                        text: " Mute/Unmute"
                    CheckBox:
                        on_press: root.sound_play()
                        on_active: root.self_active()
        BoxLayout:
            size_hint_y: None
            Label:
                id: welcome_text
                font_size: 20
                size_hint_y: None
                height: 100
                text: root.text
            Label:
                id: points
                font_size: 20
                size_hint_y: None
                height: 100
                text: str(root.points_str)
        GridLayout:
            spacing: [10, 10]
            padding: [10, 10, 10, 10]
            cols: 2
            Button:
                id: bt1
                text: root.texts[0]
                color: root.colors[0]
                font_size: 40
                background_color: [0.11, 0.06, 0.23, 1]
                on_press: app.text_2 = str(root.t_final_no_penality)
                on_press: app.text_3 = str(root.no_points)
                on_press: app.text_4 = str(root.time_penality)
                on_press: app.text_5 = str(root.t_final)
                on_press: app.text_6 = str(root.records) + str(root.t_best)
                on_press: root.ask()
                on_press: root.start()
                on_press: root.count_points(0)
            Button:
                id: bt2
                text: root.texts[1]
                color: root.colors[1]
                font_size: 40
                background_color: [0.11, 0.06, 0.23, 1]
                on_press: app.text_2 = str(root.points)
                on_press: app.text_3 = str(root.no_points)
                on_press: app.text_4 = str(root.time_penality)
                on_press: app.text_5 = str(root.t_final)
                on_press: app.text_6 = str(root.records) + str(root.t_best)
                on_press: root.ask()
                on_press: root.start()
                on_press: root.count_points(1)
            Button:
                id: bt3
                text: root.texts[2]
                color: root.colors[2]
                font_size: 40
                background_color: [0.11, 0.06, 0.23, 1]
                on_press: app.text_2 = str(root.points)
                on_press: app.text_3 = str(root.no_points)
                on_press: app.text_4 = str(root.time_penality)
                on_press: app.text_5 = str(root.t_final)
                on_press: app.text_6 = str(root.records) + str(root.t_best)
                on_press: root.ask()
                on_press: root.start()
                on_press: root.count_points(2)
            Button:
                id: bt4
                text: root.texts[3]
                color: root.colors[3]
                font_size: 40
                background_color: [0.11, 0.06, 0.23, 1]
                on_press: app.text_2 = str(root.points)
                on_press: app.text_3 = str(root.no_points)
                on_press: app.text_4 = str(root.time_penality)
                on_press: app.text_5 = str(root.t_final)
                on_press: app.text_6 = str(root.records) + str(root.t_best)
                on_press: root.ask()
                on_press: root.start()
                on_press: root.count_points(3)

<WinScreen>:
    FloatLayout:
        canvas.before:
            Color:
                rgba: 0.11, 0.055, 0.23, 1
            Rectangle:
                pos: self.pos
                size: self.size
        size: root.size
        pos: root.pos
        orientation: 'vertical'
        Label:
            pos_hint: {'center_x': 0.5, 'y': 0.45}
            font_size: 20
            text: "You win !"
        Label:
            pos_hint: {'center_x': 0.5, 'y': 0.35}
            font_size: 20
            text: root.text_2
            text: "time: " + app.text_2 + " seconds"
        Label:
            id: label_3
            pos_hint: {'center_x': 0.5, 'y': 0.25}
            font_size: 20
            text: "Miss: " + app.text_3
        Label:
            pos_hint: {'center_x': 0.5, 'y': 0.15}
            font_size: 20
            text: "Penality: 3x" + app.text_3 + " = " + app.text_4 + " seconds"
        Label:
            pos_hint: {'center_x': 0.5, 'y': 0.1}
            font_size: 20
            text: "Time final: " + app.text_5 + " seconds"
        Label:
            pos_hint: {'center_x': 0.5, 'y': 0.02}
            font_size: 20
            text: app.text_6

        Button:
            pos_hint: {'center_x': 0.5, 'y': 0.1}
            size_hint: 0.6, 0.15
            background_color: [0.76, 0.255, 0.7, 1]
            text: "Ok"
            on_press: root.manager.current = 'game'
